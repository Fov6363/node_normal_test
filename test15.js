/**
 * Created by yuanyuan on 17/1/6.
 */
const _ = require('lodash');


function differenceSet (leftSet, rightSet, leftPath, rightPath) {
    let temp_set = [];

    for (let i = 0; i < leftSet.length; i++) {
        for (let j = 0; j < rightSet.length; j++) {
            let a = _.get(leftSet[i], leftPath);
            let b = _.get(rightSet[j], rightPath);

            //console.log('id = ' + leftSet[i].id);
            if (a !== undefined && b !== undefined && a == b) {
                temp_set.push(leftSet[i]);
            }
        }
    }

    // return leftSet;
    return _.differenceWith(leftSet,temp_set,_.isEqual);
}
/*
 1056540632088588
 1056540632088590
 1056540632088592
 1056540632088593
 1056540632088597
 1057415832338451
 */

let leftSet = [{"created_at":1483016329335,"updated_at":1484031759458,"id":1056540632088588,"data":{"action_id":1057781911191721,"item_audit_status":0,"item_shop_id":1054674619793438,"item_class_three_id":1054758270992422,"item_desc":"uniform","item_return":1,"item_ship":1,"item_import":1,"item_class_two_id":1054756391944229,"item_class_one_id":1054752684179492,"item_status":1,"item_storage_count":199,"item_price":422,"item_act_prcie":175,"item_name":"啫喱水","second_kill_count":10,"second_kill_price":100,"n_choose_action_count":10,"full_sub_action_count":10},"uid":1054674619793437},{"created_at":1483016329339,"updated_at":1483986322731,"id":1056540632088589,"data":{"full_sub_action_count":11,"n_choose_action_count":11,"second_kill_price":101,"second_kill_count":11,"item_shop_id":1054674619793438,"item_class_three_id":1054758270992422,"item_desc":"hybrid","item_return":1,"item_ship":1,"item_import":1,"item_class_two_id":1054756391944229,"item_class_one_id":1054752684179492,"item_status":1,"item_storage_count":826,"item_price":482,"item_act_prcie":577,"item_name":"阿波罗","item_audit_status":0,"action_id":1057781911191721},"uid":1054674619793437},{"created_at":1483016329339,"updated_at":1483986322731,"id":1056540632088590,"data":{"item_shop_id":1054674619793438,"full_sub_action_count":12,"n_choose_action_count":12,"second_kill_price":102,"second_kill_count":12,"item_name":"阿布家","item_act_prcie":509,"item_price":897,"item_storage_count":126,"item_status":1,"item_class_one_id":1054752684179492,"item_class_two_id":1054756391944229,"item_import":1,"item_ship":1,"item_return":1,"item_desc":"homogeneous","item_class_three_id":1054758270992422,"item_audit_status":0,"action_id":1057781911191721},"uid":1054674619793437},{"created_at":1483016329339,"updated_at":1483986322731,"id":1056540632088591,"data":{"item_shop_id":1054674619793438,"second_kill_price":101,"second_kill_count":11,"item_name":"阿尔卑斯","item_act_prcie":881,"item_price":151,"item_storage_count":972,"item_status":1,"item_class_one_id":1054752684179492,"item_class_two_id":1054756391944229,"item_import":1,"item_ship":1,"item_return":1,"item_desc":"dynamic","item_class_three_id":1054758270992422,"action_id":1056691442483231,"item_audit_status":0},"uid":1054674619793437},{"created_at":1483016329340,"updated_at":1483986322731,"id":1056540632088592,"data":{"item_shop_id":1054674619793438,"item_class_three_id":1054758270992422,"item_desc":"intangible","item_return":1,"item_ship":1,"item_import":1,"item_class_two_id":1054756391944229,"item_class_one_id":1054752684179492,"item_status":1,"item_storage_count":392,"item_price":276,"item_act_prcie":492,"item_name":"阿迪达斯","item_audit_status":0},"uid":1054674619793437},{"created_at":1483016329342,"updated_at":1483986322731,"id":1056540632088593,"data":{"item_shop_id":1054674619793438,"item_class_three_id":1054758270992422,"item_desc":"object-oriented","item_return":1,"item_ship":1,"item_import":1,"item_class_two_id":1054756391944229,"item_class_one_id":1054752684179492,"item_status":1,"item_storage_count":412,"item_price":901,"item_act_prcie":612,"item_name":"阿尔飞斯","item_audit_status":0},"uid":1054674619793437},{"created_at":1483016329342,"updated_at":1483986337373,"id":1056540632088594,"data":{"item_audit_status":0,"item_name":"阿尔金","item_act_prcie":23,"item_price":924,"item_storage_count":928,"item_status":1,"item_class_one_id":1054752684179492,"item_class_two_id":1054756391944229,"item_import":1,"item_ship":1,"item_return":1,"item_desc":"modular","item_class_three_id":1054758270992422,"item_shop_id":1054674619793438},"uid":1054674619793437},{"created_at":1483016329342,"updated_at":1484062577247,"id":1056540632088595,"data":{"item_audit_status":0,"action_id":1057782246736043,"item_class_three_id":1054758270992422,"item_desc":"tertiary","item_return":1,"item_ship":1,"item_import":1,"item_class_two_id":1054756391944229,"item_class_one_id":1054752684179492,"item_status":1,"item_storage_count":758,"item_price":77,"item_act_prcie":283,"item_name":"昇靓","second_kill_count":10,"second_kill_price":1001,"item_shop_id":1054674619793438},"uid":1054674619793437},{"created_at":1483016329342,"updated_at":1484063836613,"id":1056540632088596,"data":{"item_shop_id":1054674619793438,"second_kill_price":100,"second_kill_count":10,"item_name":"焗油膏","item_act_prcie":508,"item_price":487,"item_storage_count":538,"item_status":4,"item_class_one_id":1054752684179492,"item_class_two_id":1054756391944229,"item_import":1,"item_ship":1,"item_return":1,"item_desc":"background","item_class_three_id":1054758270992422,"action_id":1056691442483231,"item_audit_status":0},"uid":1054674619793437},{"created_at":1483016329339,"updated_at":1483986350364,"id":1056540632088597,"data":{"item_audit_status":0,"item_name":"阿尔法","item_act_prcie":64,"item_price":592,"item_storage_count":181,"item_status":1,"item_class_one_id":1054752684179492,"item_class_two_id":1054756391944229,"item_import":1,"item_ship":1,"item_return":1,"item_desc":"stable","item_class_three_id":1054758270992422,"item_shop_id":1054674619793438},"uid":1054674619793437},{"created_at":1483068495130,"updated_at":1483071895296,"id":1057415832338451,"data":{"item_audit_status":0,"item_name":"大卫龙","item_act_prcie":129,"item_price":100,"item_storage_count":9999,"item_status":1,"item_class_one_id":1054752684179492,"item_class_two_id":1054756391944229,"item_import":0,"item_ship":0,"item_return":0,"item_desc":"神奇的卫龙","item_class_three_id":1054756391944229,"free_send_province":["包邮省数组 英文逗号隔开的ID"],"free_send_city":["包邮市数组  英文逗号隔开的ID"],"free_send_area":["包邮区或包邮县  英文逗号隔开的ID"],"is_free_send_country":0,"item_pics":["http://img11.360buyimg.com/n0/jfs/t1369/118/55893700/249362/7932fae6/555456e7N9acead74.jpg"],"item_storage_count_inc_red":0,"item_weight":0},"uid":1054674619793437}];
let rightSet = [{"created_at":1483523299966,"updated_at":1483971130780,"op_name":"action","data_id":1056540632088588,"uid":1054674619793437,"id":1065046177284167,"op_data":{"action_content":"商品限时秒杀","item_count":1,"action_end_time":1484523281206,"action_start_time":1483523281206,"action_name":"测试一些限时秒杀","action_status":1,"action_type":0,"action_id":1065046177284166,"item_id":1056540632088588,"second_kill_price":23,"second_kill_count":23,"shop_id":1054674619793438}},{"created_at":1483536567094,"updated_at":1483971130801,"op_name":"action","data_id":1056540632088591,"uid":1054674619793437,"id":1065268777386091,"op_data":{"action_content":"商品限时秒杀","item_count":1,"action_end_time":1484523281206,"action_start_time":1483523281206,"action_name":"测试一些限时秒杀","action_status":1,"action_type":0,"action_id":1065046177284166,"item_id":1056540632088591,"second_kill_price":23,"second_kill_count":23,"shop_id":1054674619793438}},{"created_at":1483980921905,"updated_at":1484057680446,"op_name":"action","data_id":1056540632088592,"uid":1054674619793437,"id":1072723800424558,"op_data":{"action_content":"商品限时秒杀","item_count":4,"action_end_time":1484142212000,"action_start_time":1483973021000,"action_name":"測試限时秒杀001","action_status":1,"action_type":0,"action_id":1072532405944379,"item_id":1056540632088592,"second_kill_price":1,"second_kill_count":10,"shop_id":1054674619793438}},{"created_at":1483980921934,"updated_at":1484057680469,"op_name":"action","data_id":1056540632088593,"uid":1054674619793437,"id":1072723800424559,"op_data":{"action_content":"商品限时秒杀","item_count":4,"action_end_time":1484142212000,"action_start_time":1483973021000,"action_name":"測試限时秒杀001","action_status":1,"action_type":0,"action_id":1072532405944379,"item_id":1056540632088593,"second_kill_price":1,"second_kill_count":10,"shop_id":1054674619793438}},{"created_at":1483980921970,"updated_at":1484057680490,"op_name":"action","data_id":1056540632088597,"uid":1054674619793437,"id":1072723800424560,"op_data":{"action_content":"商品限时秒杀","item_count":4,"action_end_time":1484142212000,"action_start_time":1483973021000,"action_name":"測試限时秒杀001","action_status":1,"action_type":0,"action_id":1072532405944379,"item_id":1056540632088597,"second_kill_price":1,"second_kill_count":10,"shop_id":1054674619793438}},{"created_at":1483980922003,"updated_at":1484057680506,"op_name":"action","data_id":1057415832338451,"uid":1054674619793437,"id":1072723817201777,"op_data":{"action_content":"商品限时秒杀","item_count":4,"action_end_time":1484142212000,"action_start_time":1483973021000,"action_name":"測試限时秒杀001","action_status":1,"action_type":0,"action_id":1072532405944379,"item_id":1057415832338451,"second_kill_price":1,"second_kill_count":10,"shop_id":1054674619793438}},{"created_at":1484015935008,"updated_at":1484015935008,"op_name":"action","data_id":1056540632088590,"uid":1054674619793437,"id":1073311237865478,"op_data":{"action_content":"满900减90","item_count":1,"action_end_time":1484525092000,"action_start_time":1483525092000,"action_name":"这是一个满减活动","action_status":1,"action_type":2,"action_id":1065077466792035,"item_id":1056540632088590,"full_sub_action_count":10,"shop_id":1054674619793438}}];


let result = differenceSet(leftSet,rightSet,'id','data_id');


console.log(result);